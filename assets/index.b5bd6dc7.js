var e=Object.defineProperty,t=Object.defineProperties,r=Object.getOwnPropertyDescriptors,n=Object.getOwnPropertySymbols,a=Object.prototype.hasOwnProperty,l=Object.prototype.propertyIsEnumerable,s=(t,r,n)=>r in t?e(t,r,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[r]=n,o=(e,t)=>{for(var r in t||(t={}))a.call(t,r)&&s(e,r,t[r]);if(n)for(var r of n(t))l.call(t,r)&&s(e,r,t[r]);return e},c=(e,n)=>t(e,r(n)),i=(e,t)=>{var r={};for(var s in e)a.call(e,s)&&t.indexOf(s)<0&&(r[s]=e[s]);if(null!=e&&n)for(var s of n(e))t.indexOf(s)<0&&l.call(e,s)&&(r[s]=e[s]);return r};import{r as p,R as m,K as u,a as d,T as f,b as h,c as x,u as y,s as w,d as g}from"./vendor.2a71192a.js";!function(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))t(e);new MutationObserver((e=>{for(const r of e)if("childList"===r.type)for(const e of r.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&t(e)})).observe(document,{childList:!0,subtree:!0})}function t(e){if(e.ep)return;e.ep=!0;const t=function(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerpolicy&&(t.referrerPolicy=e.referrerpolicy),"use-credentials"===e.crossorigin?t.credentials="include":"anonymous"===e.crossorigin?t.credentials="omit":t.credentials="same-origin",t}(e);fetch(e.href,t)}}();const E=p.exports.createContext({points:[],setPoints:()=>{},tolerance:0,setTolerance:()=>{},showLine:!0,setShowLine:()=>{},showRaw:!0,setShowRaw:()=>{},showPts:!0,setShowPts:()=>{},showCtr:!0,setShowCtr:()=>{}}),b=[[248,293],[248,285],[248,271],[244,255],[236,241],[223,229],[210,226],[197,228],[184,232],[167,240],[153,250],[133,260],[115,257],[100,248],[90,236],[85,220],[81,203],[77,188],[73,173],[71,159],[71,148],[71,143],[72,139],[73,137],[73,137],[143,68],[141,77],[164,144],[171,151],[267,63],[274,68],[274,191],[274,193],[274,196]],v=({children:e})=>{const[t,r]=m.useState(b),[n,a]=m.useState(62),[l,s]=m.useState(!0),[o,c]=m.useState(!0),[i,p]=m.useState(!0),[u,d]=m.useState(!0);return m.createElement(E.Provider,{value:{points:t,setPoints:r,tolerance:n,setTolerance:a,showLine:l,setShowLine:s,showRaw:o,setShowRaw:c,showPts:i,setShowPts:p,showCtr:u,setShowCtr:d}},e)};var k,C;(C=k||(k={}))[C.defined=1]="defined",C[C.computed=2]="computed";const S="\t\n\v\f\r   ᠎             　\u2028\u2029",L=new RegExp(`([a-z])[${S},]*((-?\\d*\\.?\\d*(?:e[\\-+]?\\d+)?[${S}]*,?[${S}]*)+)`,"ig"),N=new RegExp(`(-?\\d*\\.?\\d*(?:e[\\-+]?\\d+)?)[${S}]*,?[${S}]*`,"ig");function M(e){let t=[],r={x:0,y:0};return e.forEach((e=>{let n=e[0],a=r;switch(n){case"M":case"L":case"T":a={x:e[1],y:e[2]};break;case"H":a={x:e[1],y:r.y};break;case"V":a={x:r.x,y:e[1]};break;case"C":a={x:e[5],y:e[6]};break;case"S":case"Q":a={x:e[3],y:e[4]};break;case"A":a={x:e[6],y:e[7]}}t.push(a),r=a})),t}function R(e){let t=[],r={x:0,y:0},n=[];return e.forEach(((e,a,l)=>{let s=e[0],o={x:0,y:0};switch(s){case"M":case"L":o={x:e[1],y:e[2]};break;case"H":o={x:e[1],y:r.y};break;case"V":o={x:r.x,y:e[1]};break;case"C":o={x:e[5],y:e[6]},t.push({i:a,n:s,pt:r,cp:{x:e[1],y:e[2]},t:1}),t.push({i:a,n:s,pt:o,cp:{x:e[3],y:e[4]},t:1});break;case"S":{o={x:e[3],y:e[4]};let n=l[a-1];switch(n[0]){case"C":case"S":let e="C"===n[0]?3:1,l={x:2*r.x-n[e],y:2*r.y-n[e+1]};t.push({i:a,n:s,pt:r,cp:l,t:2})}t.push({i:a,n:s,pt:o,cp:{x:e[1],y:e[2]},t:1});break}case"Q":o={x:e[3],y:e[4]};let c={x:e[1],y:e[2]};t.push({i:a,n:s,pt:r,cp:c,t:1}),t.push({i:a,n:s,pt:o,cp:c,t:1});break;case"T":{let c=function(e,t){let r=l[e-1];if(r){if("Q"===r[0])return{x:2*t.x-r[1],y:2*t.y-r[2]};if("T"===r[0]){let r=c(e-1,n[e-2]||t);return{x:2*t.x-r.x,y:2*t.y-r.y}}}return t},i=c(a,r);o={x:e[1],y:e[2]},t.push({i:a,n:s,pt:r,cp:i,t:2}),t.push({i:a,n:s,pt:o,cp:i,t:2});break}case"A":o={x:e[6],y:e[7]}}n.push(r=o)})),t}function P(e,t=2){return e.toFixed(Math.max(Math.min(t,20),0))}function T(e,t,r){return Math.min(Math.max(e,t),r)}function O({children:e,pressed:t,onClick:r,title:n}){return m.createElement("div",{className:"w-8 h-8 active:scale-[.97] border rounded "+(t?"saturate-200 bg-primary-300 border-primary-700":"border-primary-900 opacity-75"),style:{boxShadow:t?"#00000010 1px 1px 2px 2px inset, #ffffff10 -2px -2px 2px 2px inset":"#00000018 1px 1px 0px 1px"},onClick:r,title:n},e)}const H=()=>{const{showLine:e,setShowLine:t,showRaw:r,setShowRaw:n,showPts:a,setShowPts:l,showCtr:s,setShowCtr:o}=p.exports.useContext(E);return m.createElement("div",{className:"flex space-x-1"},m.createElement(O,{pressed:r,onClick:()=>n((e=>!e)),title:"Show raw points"},m.createElement("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor"},m.createElement("path",{d:"M14 6.9a1 1 0 010 .2 2 2 0 01-4 0 2 2 0 010-.2 2 2 0 014 0z"}),m.createElement("circle",{cx:"3.6",cy:"16.9",r:"2"}),m.createElement("circle",{cx:"20.4",cy:"16.9",r:"2"}))),m.createElement(O,{pressed:e,onClick:()=>t((e=>!e)),title:"Show curve"},m.createElement("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor"},m.createElement("path",{d:"M3.9 17a8 8 0 01-.2-2 8.3 8.3 0 0116.6 0 8 8 0 01-.2 2"}))),m.createElement(O,{pressed:a,onClick:()=>l((e=>!e)),title:"Show smooth curve points"},m.createElement("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor"},m.createElement("path",{d:"M13.9 7.1a8.3 8.3 0 016.4 7.8m-16.6-.1a8.3 8.3 0 016.2-7.7"}),m.createElement("path",{d:"M1.6 15.1h4v4h-4zm16.8 0h4v4h-4zM9.9 4.9h4v4h-4z"}))),m.createElement(O,{pressed:s,onClick:()=>o((e=>!e)),title:"Show smooth curve point handles"},m.createElement("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor"},m.createElement("path",{d:"M14 7.1a8.3 8.3 0 016.4 7.8m-16.7-.1A8.4 8.4 0 0110 7.1"}),m.createElement("path",{d:"M1.6 15.1h4v4h-4zm16.8 0h4v4h-4z"}),m.createElement("path",{d:"M118.6 93.4v4h-4v-4zm-3.9 2.2h-.1z",transform:"translate(-104.6 -88.5)"}),m.createElement("path",{className:"cls-3",d:"M20.4 7.2h-6.5m-4 0H3.6"}))))},z=u({}),{styled:j,css:V,keyframes:B,getCssString:$,theme:A}=z,I={boxSizing:"border-box"},U=j(d,c(o({},I),{display:"flex",position:"relative",alignItems:"center",userSelect:"none",touchAction:"none",width:"100%",height:"1em"})),X=j(f,c(o({},I),{background:"#ffffff40",position:"relative",flexGrow:1,height:3,borderRadius:"3px"})),Y=j(h,c(o({},I),{position:"absolute",background:"var(--tm-primary-500)",outline:"1px solid #00000050",borderRadius:"3px",height:"100%"})),F=j(x,c(o({},I),{display:"flex",width:18,height:18,background:"var(--tm-primary-500)",borderRadius:"50%",cursor:"pointer",outline:"1px solid #00000050","&:hover":{backgroundColor:"var(--tm-primary-500)"},"&:focus":{boxShadow:"0 0 0 5px #0000001c"}})),G=m.forwardRef(((e,t)=>{const r=e.value||e.defaultValue||[];return m.createElement(U,c(o({},e),{ref:t}),m.createElement(X,null,m.createElement(Y,null)),r.map(((e,t)=>m.createElement(F,{key:t}))))}));function D(e){const t=function(e){if(!e||!e.length)return[["M",0,0]];let t,r=[],n=0,a=0,l=0,s=0,o=0;"M"==e[0][0]&&(n=+e[0][1],a=+e[0][2],l=n,s=a,o++,r[0]=["M",n,a]);for(let c,i,p=o,m=e.length;p<m;p++){if(r.push(c=[]),i=e[p],t=i[0],t!=t.toUpperCase())switch(c[0]=t.toUpperCase(),c[0]){case"A":c[1]=i[1],c[2]=i[2],c[3]=i[3],c[4]=i[4],c[5]=i[5],c[6]=+i[6]+n,c[7]=+i[7]+a;break;case"V":c[1]=+i[1]+a;break;case"H":c[1]=+i[1]+n;break;case"M":l=+i[1]+n,s=+i[2]+a;default:for(let e=1,t=i.length;e<t;e++)c[e]=+i[e]+(e%2?n:a)}else for(let e=0,t=i.length;e<t;e++)c[e]=i[e];switch(c[0]){case"Z":n=+l,a=+s;break;case"H":n=c[1];break;case"V":a=c[1];break;case"M":l=c[c.length-2],s=c[c.length-1];default:n=c[c.length-2],a=c[c.length-1]}}return r}(function(e){if(!e)return[];let t={a:7,c:6,o:2,h:1,l:2,m:2,r:4,q:4,s:4,t:2,v:1,u:3,z:0},r=[];return e.replace(L,(function(e,n,a,l,s,...o){let c=[],i=n.toLowerCase();if(a.replace(N,(function(e,t,r,...n){t&&c.push(+t)})),"m"==i&&c.length>2&&(r.push([n].concat(c.splice(0,2))),i="l",n="m"==n?"l":"L"),"o"==i&&1==c.length&&r.push([n,c[0]]),"r"==i)r.push([n].concat(c));else for(;c.length>=t[i]&&(r.push([n].concat(c.splice(0,t[i]))),t[i]););})),r}(e));return{points:t.length>1?M(t):[],controls:t.length>1?R(t):[]}}var Q,W,q,K;function Z(e){var t=e,{pts:r}=t,n=i(t,["pts"]);return n=o({stroke:q.sRaw,fill:q.fRaw},n),m.createElement("g",o({},n),r.map(((e,t)=>m.createElement("circle",{cx:e[0],cy:e[1],r:5,key:t},m.createElement("title",null,"Index: ",t," Location: ",P(e[0],0)," x ",P(e[1],0))))))}function J(e){var t=e,{pts:r}=t,n=i(t,["pts"]);return n=o({r:13,stroke:q.sCpt,fill:q.fCpt},n),m.createElement("g",null,r.map(((e,t)=>m.createElement(m.Fragment,{key:t},m.createElement("circle",o({cx:e.x,cy:e.y},n),m.createElement("title",null,"Index: ",t,": Location: ",P(e.x,0)," x ",P(e.y,0))),m.createElement("text",{x:e.x+16,y:e.y+0,fontSize:"7",stroke:"none"},t)))))}function _(e){var t=e,{cpts:r}=t,n=i(t,["cpts"]);return n=o({stroke:q.sHandle,fill:q.fHandle,strokeWidth:"1"},n),m.createElement("g",o({},n),r.map(((e,t)=>m.createElement(m.Fragment,{key:t},m.createElement("rect",{x:e.cp.x-4,y:e.cp.y-4,width:8,height:8,fill:e.t===k.computed?"none":n.fill},m.createElement("title",null,"Command ",e.n,": ",e.i,": Location: ",P(e.cp.x,0)," x ",P(e.cp.y,0))),m.createElement("line",{x1:e.pt.x,y1:e.pt.y,x2:e.cp.x,y2:e.cp.y,strokeDasharray:"2 2"})))))}(W=Q||(Q={}))[W.rRaw=5]="rRaw",W[W.rCpt=13]="rCpt",W[W.wHandle=8]="wHandle",W[W.rHandle=4]="rHandle",W[W.handleTextOfsX=16]="handleTextOfsX",W[W.handleTextOfsY=0]="handleTextOfsY",W[W.wLineLower=5]="wLineLower",W[W.wLineUpper=2]="wLineUpper",(K=q||(q={})).sRaw="blue",K.fRaw="#0085ff",K.sCpt="red",K.fCpt="#ffa500",K.sHandle="maroon",K.fHandle="tomato",K.slineLower="#ff8422",K.slineUpper="#ffdb00";const ee=()=>{const e=m.useRef(null),{points:t,setPoints:r,tolerance:n,setTolerance:a,showLine:l,showRaw:s,showPts:i,showCtr:u}=p.exports.useContext(E),d=p.exports.useCallback(function(e,t=100){let r,n,a;return function(...l){a=this,n=l,r||(r=setTimeout((()=>{r=null,e.apply(a,n)}),t))}}((e=>r((t=>[...t,e]))),50),[]),f=y((t=>{if(t.dragging&&1===t.buttons){let r=function(e,t){var r;if(void 0===t&&(t=e.currentTarget),t){var n=t.ownerSVGElement||t;if(n.createSVGPoint){var a=n.createSVGPoint();return a.x=e.clientX,a.y=e.clientY,[(a=a.matrixTransform(null==(r=t.getScreenCTM())?void 0:r.inverse())).x,a.y]}if(t.getBoundingClientRect){var l=t.getBoundingClientRect();return[e.clientX-l.left-t.clientLeft,e.clientY-l.top-t.clientTop]}}return[e.pageX,e.pageY]}(t.event,e.current);r[0]=T(r[0],13,g-13),r[1]=T(r[1],13,b-13),d(r)}})),h=m.useMemo((()=>function(e,t){return e.length>1?w(e,{tolerance:t}):""}(t,n)),[t,n]),x=m.useMemo((()=>D(h)),[h]),g=500,b=500;return m.createElement("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-4 text-gray-700 select-none"},m.createElement("div",{className:"col-span-full p-4 flex justify-center border rounded border-white text-gray-300 text-xl font-semibold"},m.createElement("div",{className:""},"Points: ",t.length," -> ",x.points.length)),m.createElement("svg",c(o({ref:e},f()),{viewBox:`0 0 ${g} ${b}`,className:"col-span-1 lg:col-span-2 min-w-[500px] w-full h-full bg-primary-300 border-primary-600 border-8 border-opacity-50"}),i&&m.createElement(J,{pts:x.points}),u&&m.createElement(_,{cpts:x.controls}),s&&m.createElement(Z,{pts:t}),l&&m.createElement(m.Fragment,null,m.createElement("path",{fill:"none",stroke:q.slineLower,strokeWidth:5,d:h}),m.createElement("path",{fill:"none",stroke:q.slineUpper,strokeWidth:2,d:h}))),m.createElement("div",{className:"lg:min-w-[20rem] p-4 space-y-4 bg-primary-300 text-sm rounded border-primary-600 border-8 border-opacity-50"},m.createElement("div",{className:"flex items-center space-x-2"},m.createElement("div",{className:""},"Tolerance:"),m.createElement("div",{className:"flex-1 h-3"},m.createElement(G,{min:0,max:400,step:.1,value:[n],onValueChange:e=>a(+P(e[0],0))})),m.createElement("div",{className:""},n)),m.createElement("div",{className:"flex justify-between"},m.createElement(H,null),m.createElement("button",{className:"p-1 border border-primary-700 rounded shadow active:scale-[.97]",onClick:()=>r([]),title:"Clear canvas points"},"Clear"))))};function te(){return m.createElement(v,null,m.createElement("div",{className:"h-screen flex flex-col"},m.createElement("header",{className:"flex-none p-2 shadow-md"},m.createElement("div",{className:""},m.createElement("div",{className:"space-x-2 flex items-center"},m.createElement("div",{className:"block p-2 rounded text-gray-100 bg-primary-700 saturate-50 border border-primary-400 shadow"},"Simplify points"),m.createElement("div",{className:"block p-2 rounded text-gray-100 bg-primary-700 saturate-50 border border-primary-400 shadow"},"Simplify path")))),m.createElement("div",{className:"flex justify-center text-2xl text-primary-900"},m.createElement("p",{className:"text-center"},"Draw a line on the canvas and use the tolerance slider to see the result of the interpolation.")),m.createElement("div",{className:"flex-1 flex items-center justify-center"},m.createElement(ee,null))))}g.render(m.createElement(m.StrictMode,null,m.createElement(te,null)),document.getElementById("root"));
